@model cdo.Models.ListLK5

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Lk-user</title>
</head>

<body>

    <form method="post" asp-controller="User" asp-action="Creat">
        <h3>@ViewData["Message"]</h3>



        <div class="panel-group" id="accordion">

            <div class="panel panel-default">
                <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapse0">
                    <h4 class="panel-title" style="position: relative; padding:10px">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse0">
                            Фильтры
                        </a>
                    </h4>
                </div>
                <div id="collapse0" class="collapse in ">
                    <div class="panel-body">

                        <table>
                            <tr class="od">
                                <td style="width: 15%;">№ заявки</td>
                                <td style="width: 35%;">
                                    <input type="text" asp-for="Filt.Nom" />
                                </td>
                                <td style="width: 15%;">Статус</td>
                                <td style="width: 35%;">
                                    <input type="text" asp-for="Filt.Status" />
                                </td>
                            </tr>
                            <tr class="od">
                                <td>ФИО принявшего</td>
                                <td>
                                    <input type="text" asp-for="Filt.FIO_prin" />
                                </td>

                                <td>ФИО выполневшего</td>
                                <td>
                                    <input type="text" asp-for="Filt.FIO_vipol" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label><input type="checkbox" asp-for="Filt.prim">Примечание</label>
                                </td>

                                <td>
                                    <label><input type="checkbox" asp-for="Filt.neisp">Неисправность</label>
                                </td>

                                <td>
                                    <label><input type="checkbox" asp-for="Filt.zamena">Замена</label>
                                </td>

                                <td>
                                    <label><input type="checkbox" asp-for="Filt.viezd">Выезд</label>
                                </td>
                            </tr>
                        </table>
                        <table style="max-width:700px">
                            <tr class="od">
                                <td>Дата заявления </td>
                                <td>
                                    <input type="text" asp-for="Filt.DatNachZ" id="data_z">
                                    <script>
                                        dataN = new Date();

                                        //alert(dataN);
                                        $(function () {
                                            $('#data_z').daterangepicker({
                                                singleDatePicker: true,
                                                showDropdowns: true,
                                                "minDate": "01/01/1970",
                                                "maxDate": dataN,
                                                "autoApply": true,
                                                "applyLabel": "Выбрать",
                                                "cancelLabel": "Отменить",
                                                locale: {
                                                    format: 'DD.MM.YYYY',
                                                    "firstDay": 1
                                                }
                                            });
                                        });
                                    </script>
                                </td>
                                <td>
                                    <input type="text" asp-for="Filt.DatKoncZ" id="data_zk">
                                    <script>

                                        var timeIs = new Date(new Date().setFullYear(new Date().getFullYear() + 10));

                                        dataN = new Date();
                                        $(function () {
                                            $('#data_zk').daterangepicker({
                                                singleDatePicker: true,
                                                showDropdowns: true,
                                                "startDate": timeIs,
                                                "minDate": "01/01/1970",
                                                "maxDate": timeIs,
                                                "autoApply": true,
                                                "applyLabel": "Выбрать",
                                                "cancelLabel": "Отменить",
                                                locale: {
                                                    format: 'DD.MM.YYYY',
                                                    "firstDay": 1
                                                }
                                            });
                                        });
                                    </script>
                                </td>
                            </tr>
                            <tr class="od">
                                <td>Дата выполнения </td>
                                <td>
                                    <input type="text" asp-for="Filt.DatNachV" id="data_v">
                                    <script>
                                        dataN = new Date();

                                        //alert(dataN);
                                        $(function () {
                                            $('#data_v').daterangepicker({
                                                singleDatePicker: true,
                                                showDropdowns: true,
                                                "minDate": "01/01/0001",
                                                "maxDate": dataN,
                                                "autoApply": true,
                                                "applyLabel": "Выбрать",
                                                "cancelLabel": "Отменить",
                                                locale: {
                                                    format: 'DD.MM.YYYY',
                                                    "firstDay": 1
                                                }
                                            });
                                        });
                                    </script>
                                </td>
                                <td>
                                    <input type="text" asp-for="Filt.DatKoncV" id="data_vk">
                                    <script>

                                        var timeIs = new Date(new Date().setFullYear(new Date().getFullYear() + 10));

                                        dataN = new Date();
                                        $(function () {
                                            $('#data_vk').daterangepicker({
                                                singleDatePicker: true,
                                                showDropdowns: true,
                                                "startDate": timeIs,
                                                "minDate": "01/01/1970",
                                                "maxDate": timeIs,
                                                "autoApply": true,
                                                "applyLabel": "Выбрать",
                                                "cancelLabel": "Отменить",
                                                locale: {
                                                    format: 'DD.MM.YYYY',
                                                    "firstDay": 1
                                                }
                                            });
                                        });
                                    </script>
                                </td>
                            </tr>



                        </table>
                        <button type="submit" style="margin:5px;" asp-area="" asp-controller="Lk" asp-action="Rem">Фильтровать</button>
                    </div>
                </div>
            </div>
        </div>

        <table id="lk">
            <tr>
                <th>№ заявки</th>
                <th>Дата заявки</th>
                <th>Причина</th>
                <th>ФИО ребенка</th>
                <th>ФИО зп</th>
                <th>МО</th>
                <th>Адрес</th>
                <th>Дата выполнения</th>
                <th>ФИО принявшего</th>
                <th>ФИО выполневшего</th>
                <th>Статус</th>
                <th>Примечание</th>
                <th>Замена </th>
                <th>Выезд</th>
                <th>Кнопки управления</th>
            </tr>

            @for (int i = 0; i < Model.Listlk.Count; i++)
            {
                <tr>
                    <td><a asp-controller="Lk" asp-action="kartochka" asp-route-id="@Model.Listlk[i].id_main">@Model.Listlk[i].rem.Id</a></td>
                    <td>@Model.Listlk[i].rem.data_z_r</td>
                    <td>@Model.Listlk[i].rem.prich_r</td>
                    <td>@Model.Listlk[i].fam @Model.Listlk[i].ima @Model.Listlk[i].otch</td>
                    <td>@Model.Listlk[i].Fio_rod_zp</td>
                    <td>@Model.Listlk[i].MO</td>
                    <td>@Model.Listlk[i].address_proj</td>
                    <td>
                        @if (Model.Listlk[i].rem.data_v_r.ToShortDateString() != "01.01.0001")
                        {@Model.Listlk[i].rem.data_v_r.ToShortDateString()}
                    </td>
                    <td>@Model.Listlk[i].rem.fio_prin_r</td>
                    <td>@Model.Listlk[i].rem.fio_vipol_r</td>
                    <td>@Model.Listlk[i].rem.status_r</td>
                    <td>@Model.Listlk[i].rem.prim_r</td>
                    <td>
                        @if (Model.Listlk[i].rem.zamena == true)
                        {@Html.Raw("Замена");
                    }
                    </td>
                    <td>
                        @if (Model.Listlk[i].rem.viezd == true)
                        {@Html.Raw("Выезд");
                    }
                    </td>
                    <td><a asp-controller="Lk" asp-action="kartochka" asp-route-id="@Model.Listlk[i].id_main">Открыть</a> </td>
                </tr>
            }
        </table>

    </form>
</body>
</html>

<script>

    var VAL = "Заявление на рассмотрении";
    var VAL2 = "Дубль";
    var VAL3 = "Ошибочное заявление";
    var VAL4 = "Отказано АК в приеме заявления";
    var VAL5 = "Заявление подлинное";
    $(function () {
        $("#lk tr").each(function () {
            var textValue = $(this).closest('tr').find('td:eq(4)').text();
            //  alert(textValue);
            if (textValue == VAL) {
                // add css class or any manipulation to your dom.
                $(this).closest('tr').find('td').css('background-color', 'rgba(91, 243, 145, 0.15)');
            }
            if (textValue == VAL2) {
                // add css class or any manipulation to your dom.
                $(this).closest('tr').find('td').css('background-color', 'rgba(255, 0, 0, 0.24)');
            }
            if (textValue == VAL3) {
                // add css class or any manipulation to your dom.
                $(this).closest('tr').find('td').css('background-color', 'rgba(255, 0, 0, 0.24)');
            }
            if (textValue == VAL4) {
                // add css class or any manipulation to your dom.
                $(this).closest('tr').find('td').css('background-color', 'rgba(255, 0, 0, 0.24)');
            }
            if (textValue == VAL5) {
                // add css class or any manipulation to your dom.
                $(this).closest('tr').find('td').css('background-color', 'rgba(24, 239, 24, 0.36)');
            }
        });
    });

</script>
